<html>
<h1>EPP.com - Login</h1>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Page</title>

    <link rel="stylesheet" href="styles.css">
</head>
<!--these create the buttons that take the user to the home and about page -->
<body onload="get()">
    <a href="index.html"><button onclick="index.html"> Home </button></a>
    <a href="about.html"><button onclick="about.html"> About </button></a>
    <!-- <div class="alert-box"><p class="alert">Error</p></div> -->

    <p id="savedText"> </p>
    <p id="openedText"> </p>
<!-- this creates the elements that allow the user to type in their name, password and login with the "log in" button-->
    <div class="form" id = login_field>
        <br>
        <input type="text" name="username" placeholder="Your Name" autocomplete="off" class="your-name" id="username" required>
        <input type="password" name="password" placeholder="Password" autocomplete="off" class="password" id="password" required>
        <br><br>
        <button onclick="save()" class="submit-btn" id = "login">Log In</button>
        <br>
        <p>Name/password are only for this event.<br>New to this event? Make up a password.<br>Returning? Use the same name/password.</p>
        <!-- <a href="#" class="link">don't have an account? Register one</a> -->
    </div>
<!-- this is a hidden element that allows the user to type in how many events they want, once it's been revealed -->
    <div id = "eventplanneroptions" hidden>
      <p> How many events do you want?</p>
      <input type = "text" name = "number-of-events" placeholder = "Number of events" autocomplete="off" id = "number-of-events" required >
      <br><br>     
      <button id = "generate">generate</button>
    </div>
<!-- this is a hidden element that welcomes a user who has previously logged in-->
    <div id = "successfulLogin_field" hidden>
      Welcome back [insert name here]!
    </div>
    <!-- <p hidden id = invis> Invisible :D</p>
    <button>Visible</button> -->
    <script src="event.js"></script>
</body>
<!-- <script src="script.js"></script> -->

<!-- this is a hidden table which represent the user's schedules.
     once revealed, the user can click on each box and it will toggle between
     lightgreen and mistyrose, representing if they are available at the associated time-->
<div id = "userschedule-div-1">
  <table  style = " border:solid" id = "userschedule-table" hidden>
       <tr id = "user-schedule-row1" style="background-Color:mistyrose" onclick= "changeColor(id)" >
      <td height = "10x">
        
      </td>
    </tr>
    <tr id = "user-schedule-row2" style="background-Color:mistyrose" onclick= "changeColor(id)">
      <td  style = "border-bottom: dotted;" height = "10px" width = "15px">
        
      </td>
    </tr>
    <tr id = "user-schedule-row3" style="background-Color:mistyrose" onclick= "changeColor(id)">
      <td height = "10px">
        
      </td>
    </tr>
       <tr id = "user-schedule-row4" style="background-Color:mistyrose" onclick= "changeColor(id)">
      <td height = "10px">
        
      </td>
    </tr>
    
  </table>
  </div>

<!-- this is a hidden table which represents the groups schedule. 
     This will show the availablity of everyone who have put in their available times
     once revealed and when the user inputs their own availablity-->
  <div id = "groupchedule-div-1">
    <table  style = " border:solid" id = "groupchedule-table" hidden>
         <tr style="background-Color:lightgrey">
        <td height = "10px" width = "15px">
          
        </td>
      </tr>
      <tr style="background-Color:lightgrey">
        <td style = "border-bottom: dotted;" height = "10px" width = "15px">
          
        </td>
      </tr>
      <tr style="background-Color:lightgrey">
        <td height = "10px" width = "15px">
          
        </td>
      </tr>
         <tr style="background-Color:lightgrey">
        <td height = "10px" width = "15px">
          
        </td>
      </tr>
      
    </table>
    </div>


<script>
    var storedName = localStorage.getItem("storedName")
    function save() {
        var item = document.getElementById("username").value;
        localStorage.setItem("storedName", item)
        document.getElementById("savedText").innerHTML = item + " SAVED";
    }
    function get() {
        localStorage.getItem("storedName");
        document.getElementById("openedText").innerHTML = storedItem + " OPENED";
    }
//this toggles the login_field and successfulLogin_field
    function successfulLogin(){
      var x = document.getElementById("login_field")
      var y = document.getElementById("successfulLogin_field")
      if(y.style.display !== "block"){
        x.style.display = "none";
        y.style.display = "block";
      }else{
        x.style.display = "block";
        y.style.display = "none";
      }
      
    }
//this toggles the background of an element between mistyrose and lightgreen
    function changeColor(id) { 
            const button = document.getElementById(id);
            if (button.style.backgroundColor === "mistyrose") {
                button.style.backgroundColor = "lightgreen";
                button.dataset.selected = "true";
            } else {
                button.style.backgroundColor = "mistyrose";
                button.dataset.selected = "false";
            }
        }
//this toggles the group and user schedules        
  function schedules(){
      var x = document.getElementById("groupchedule-table")
      if(x.style.display !== "block"){
        x.style.display = "block"
      }else{
        x.style.display = "none"
      }
      var a = document.getElementById("userschedule-table")
      if(a.style.display !== "block"){
        a.style.display = "block"
      }else{
        a.style.display = "none"
      }
  }
//this toggles the "eventplanneroptions" element
function howmanyevents(){
  var x = document.getElementById("eventplanneroptions")
  
  if(x.style.display !== "block"){
      x.style.display = "block";
    }else{
    x.style.display = "none";
  }
  
}
</script>

<!-- these are the buttons which, once pressed, call the associated functions-->
<button id = "successfulLogin_button" onclick="successfulLogin()">Successful login</button>
<button id = "schedules_button" onclick= "schedules()"> schedule</button>
<button id = "how_many_events_button"onclick = "howmanyevents()"> How Many Events</button>

<!-- this button, once pressed, calls the slowDown function-->
<div id = "genere_schedules_tables_button">
  <button onclick= "slowDown()">
    Generate Schedules
  </button>
</div>
<script>
  
//this functions generates the schedules for the user to mark their availablity based
//on the days they selected, the start time and end time
 function generateScheduleTables(days = [], startTime, endTime){
   var meridem;
   var hour;
    
    var s = startTime.indexOf("m");  
    var smer = startTime.indexOf("m") - 1; //this varibale is set to the letter before "m" (could be "a" or "p")
    var length_startTime = startTime.length;
    if (length_startTime != 3){ //This checks if the number before the semi-colon is a double digit number
              //by checking the current index of s (if it's not 1, it's a double digit)
    s = startTime[0]+ startTime[1];
    s = parseInt(s);
    }else{
      s = parseInt(startTime[0]);
    }
    var length_endTime = endTime.length;
    var e = endTime.indexOf("m");
    var emer = endTime.indexOf("m") - 1;
    if (length_endTime != 3){
    e = endTime[0]+ endTime[1];
    console.log(e);
    e = parseInt(e);
    console.log(e);
    }else{
      e = parseInt(endTime[0]);
      console.log("error")
    }
    console.log(e);

    //This converts the start and end times to military times
    if ((s == "12") && (startTime[smer] == "a")){
      s -= 12;
    }else if ((s != 12) && ((startTime[smer] == "p"))){
      s += 12;
    }
    else{
      s = s;
    }
    
    if((e == "12") && (endTime[emer] == "p")){
      e = e;
    }else if((e == "12") && (endTime[emer] == "a")){
      e -= 12;
    }else if((e != "12") && ((endTime[emer] == "p"))){
      e += 12;
    }
    else{
      e = e;
    }
    console.log(s);
    console.log(e);

   //This creates n amount of tables based on the start and end times
   // for (i = s; i < e; i++){
   
   //This if statement checks if the startime and endtime are both AM or PM
   
   //this changes the value of e (the endtime) to represent military time if the
   //start and end times go from "am"-"pm"

   //This loop sets the day and which day the following schedule is for
    for (let i = 0; i != days.length; i++){
        var dow = days[i]; // dow,(day.of.week), is the day associated with the current index of the "days" list
        const day = document.createElement("table"); //creates a table
        day.id = `${dow}`; //gives the table an id
        day.style = "float:left"; //makes the tables go towards the left
        //day.textContent = "";
        //table.textContent = "";
        document.body.appendChild(day); //adds the table (which is still empty) to the page
        //this creates the 'template' for the table
        let template = `
          <table>
            <tr id = "day-label-${i}">
              <th id = "day-label-header${i}">   </th> <th id = "${dow}-header"style = "font-size:12px"> ${dow} </th>
            </tr>
          </table>
          `;
        day.innerHTML = template;  // this adds the template to empty table

      //this loop creates the schedule for the associated day 
      //This works the same as the previous loop, except the conditions are different and the
      //template is different
      for (j = s; j != e; j++){
        //if this is the first table
        if (i == 0){
          //if the time is before 12 PM
          if(j == 0){
          console.log(j + " AM");
          hour = j + 12; 
          meridem = "AM";
          const table = document.createElement("table");
          table.id = `${dow}`+ "-" + j;
          table.textContent = "";
          document.body.appendChild(table);

        //this is the template for the table
          let template2 = `    
  <table>
  <tr>
   <td id = "${days[i]}-${j}-borderless-0" style = "text-align:right; font-size:10px"> <sup> ${hour} ${meridem}</sup> </td> <td id = "${days[i]}-${j}-0" onclick = "changeColor(id)" style = "border:solid;background-color:mistyrose;  height = "5x" width = 10px> </td>
  </tr>
 
  <tr>
   <td  id = "${days[i]}-${j}-borderless-1" style = "padding:5.5px"> </td> <td id = "${days[i]}-${j}-1" onclick = "changeColor(id)" style = "border-bottom: dashed; border-left: solid; border-right: solid;background-color:mistyrose; border-top: solid;" height = "5px"></td>
  </tr>
 
  <tr>
   <td id = "${days[i]}-${j}-borderless-2" style= "padding:5.5px"> </td> <td id = "${days[i]}-${j}-2" onclick = "changeColor(id)" style = "border:solid;background-color:mistyrose" height = "5px"></td>
  </tr>

    <tr id = "woohoo ${j}">
   <td id = "${days[i]}-${j}-borderless-3" style= "padding:5.5px"> </td> <td id = "${days[i]}-${j}-3" onclick = "changeColor(id)" style = "border:solid;background-color:mistyrose" height = "5px"></td>
  </tr>
 </table>
`;
          day.innerHTML += template2; 
        }
        else if(j < 12){
          console.log(j + " AM");
          hour = j; 
          meridem = "AM";
          const table = document.createElement("table");
          table.id = `${dow}`+ "-" + j;
          table.textContent = "";
          document.body.appendChild(table);
        //this is the template for the table
          let template2 = `    
  <table>
  <tr>
   <td id = "${days[i]}-${j}-borderless-0" style = "text-align:right; font-size:10px"> <sup> ${hour} ${meridem}</sup> </td> <td id = "${days[i]}-${j}-0" onclick = "changeColor(id)" style = "border:solid;background-color:mistyrose;  height = "5x" width = 10px> </td>
  </tr>
 
  <tr>
   <td  id = "${days[i]}-${j}-borderless-1" style = "padding:5.5px"> </td> <td id = "${days[i]}-${j}-1" onclick = "changeColor(id)" style = "border-bottom: dashed; border-left: solid; border-right: solid;background-color:mistyrose; border-top: solid;" height = "5px"></td>
  </tr>
 
  <tr>
   <td id = "${days[i]}-${j}-borderless-2" style= "padding:5.5px"> </td> <td id = "${days[i]}-${j}-2" onclick = "changeColor(id)" style = "border:solid;background-color:mistyrose" height = "5px"></td>
  </tr>
    
    <tr id = "woohoo ${j}"> 
   <td id = "${days[i]}-${j}-borderless-3" style= "padding:5.5px"> </td> <td id = "${days[i]}-${j}-3" onclick = "changeColor(id)" style = "border:solid;background-color:mistyrose" height = "5px"></td>
  </tr>
 </table>
`;
          day.innerHTML += template2; 
      //if the time is 12 PM
        }else if(j == 12){
          console.log(j +  " PM");
          hour = j;
          meridem = "PM";
          const table = document.createElement("table");
          table.id = `${dow}`+ "-" + j;
          table.textContent = "";
          document.body.appendChild(table);
          let template2 = `    
  <table>
  <tr>
   <td id = "${days[i]}-${j}-borderless-0" style = "text-align:right; font-size:10px"> <sup> ${hour} ${meridem}</sup> </td> <td id = "${days[i]}-${j}-0" onclick = "changeColor(id)" style = "border:solid;background-color:mistyrose;  height = "5x" width = 10px> </td>
  </tr>
 
  <tr>
   <td  id = "${days[i]}-${j}-borderless-1" style = "padding:5.5px"> </td> <td id = "${days[i]}-${j}-1" onclick = "changeColor(id)" style = "border-bottom: dashed; border-left: solid; border-right: solid;background-color:mistyrose; border-top: solid;" height = "5px"></td>
  </tr>
 
  <tr>
   <td id = "${days[i]}-${j}-borderless-2" style= "padding:5.5px"> </td> <td id = "${days[i]}-${j}-2" onclick = "changeColor(id)" style = "border:solid;background-color:mistyrose" height = "5px"></td>
  </tr>
    
    <tr id = "woohoo ${j}">
   <td id = "${days[i]}-${j}-borderless-3" style= "padding:5.5px"> </td> <td id = "${days[i]}-${j}-3" onclick = "changeColor(id)" style = "border:solid;background-color:mistyrose" height = "5px"></td>
  </tr>
 </table>
`;
          day.innerHTML += template2; 
      //if the time is after 12 PM
        }else if (j > 12){
          console.log((j-12) + " PM");
          hour = j-12;
          meridem = "PM";
          const table = document.createElement("table");
          table.id = `${dow}`+ "-" + j;
          table.textContent = "";
          document.body.appendChild(table);
          let template2 = `    
  <table>
  <tr>
   <td id = "${days[i]}-${j}-borderless-0" style = "text-align:right; font-size:10px"> <sup> ${hour} ${meridem}</sup> </td> <td id = "${days[i]}-${j}-0" onclick = "changeColor(id)" style = "border:solid;background-color:mistyrose;  height = "5x" width = 10px> </td>
  </tr>
 
  <tr>
   <td  id = "${days[i]}-${j}-borderless-1" style = "padding:5.5px"> </td> <td id = "${days[i]}-${j}-1" onclick = "changeColor(id)" style = "border-bottom: dashed; border-left: solid; border-right: solid;background-color:mistyrose; border-top: solid;" height = "5px"></td>
  </tr>
 
  <tr>
   <td id = "${days[i]}-${j}-borderless-2" style= "padding:5.5px"> </td> <td id = "${days[i]}-${j}-2" onclick = "changeColor(id)" style = "border:solid;background-color:mistyrose" height = "5px"></td>
  </tr>
    
    <tr >
   <td id = "${days[i]}-${j}-borderless-3" style= "padding:5.5px"> </td> <td id = "${days[i]}-${j}-3" onclick = "changeColor(id)" style = "border:solid;background-color:mistyrose" height = "5px"></td>
  </tr>
 </table>
`;
          day.innerHTML += template2; 
        }
        
        //if the current time is one less than the end time and the end time is before 12 PM
        if (((j + 1) == e) && (e < 12)){
          var eT = document.getElementById(`${days[i]}-${j}-borderless-3`)
          console.log(e + " AM");
          hour = e;
          meridem = "AM";
        
         
          eT.innerHTML = `<td ><sub>${hour} ${meridem}</sub></td>`; 
          eT.style = "padding:0px";
          eT.style = "font-size:10px";
          //eT.style = "text-align:right";
            //if the current time is one less than the end time and the end time is 12 PM
        }else if (((j + 1) == e) &&  e == 12){
          var eT = document.getElementById(`${days[i]}-${j}-borderless-3`)
          console.log(e + " PM")
          hour = e;
          meridem = "PM";

          eT.innerHTML = `<td><sub>${hour} ${meridem}</sub>`; 
          eT.style = "padding:0px";
          eT.style = "font-size:10px";
          //eT.style = "text-align:right";
          }
        //if the current time is one less than the end time and the end time is after 12 PM
        else if (((j + 1) == e) && (e > 12)){
          var eT = document.getElementById(`${days[i]}-${j}-borderless-3`)
          console.log((e-12) + " PM");
          hour = e -12;
          meridem = "PM";

        
          eT.innerHTML = ` <td><sub>${hour} ${meridem}</sub></td> `;        
          eT.style = "padding:0px";
          eT.style = "font-size:10px";
          //eT.style = "text-align:right";
        }
        }
        
        
        //This is the same as the previous code, except this prints the rest of the schedules without the times
         if (i != 0){ 
        // if the time is 12 AM
          if(j == 0){
          console.log(j + " AM");

          const table = document.createElement("table");
          table.id = `${dow}`+ "-" + j;
          table.textContent = "";
          document.body.appendChild(table);

        //this is the template for the table
          let template2 = `    
  <table>
  <tr>
   <td id = "${days[i]}-${j}-borderless-0" style = "text-align:right; font-size:10px;padding:5.5px"> <sup> </sup> </td> <td id = "${days[i]}-${j}-0" onclick = "changeColor(id)" style = "border:solid;background-color:mistyrose;  height = "5x" width = 10px> </td>
  </tr>
 
  <tr>
   <td  id = "${days[i]}-${j}-borderless-1" style = "padding:5.5px"> </td> <td id = "${days[i]}-${j}-1" onclick = "changeColor(id)" style = "border-bottom: dashed; border-left: solid; border-right: solid;background-color:mistyrose; border-top: solid;" height = "5px"></td>
  </tr>
 
  <tr>
   <td id = "${days[i]}-${j}-borderless-2" style= "padding:5.5px"> </td> <td id = "${days[i]}-${j}-2" onclick = "changeColor(id)" style = "border:solid;background-color:mistyrose" height = "5px"></td>
  </tr>
      <tr>
   <td id = "${days[i]}-${j}-borderless-3" style= "padding:5.5px"> </td> <td id = "${days[i]}-${j}-3" onclick = "changeColor(id)" style = "border:solid;background-color:mistyrose" height = "5px"></td>
  </tr>
 </table>
`;
          day.innerHTML += template2; 
        }else if (j < 12){
          const table = document.createElement("table");
          table.id = `${dow}`+ "-" + j;
          table.textContent = "";
          document.body.appendChild(table);
          let template2 = `    
  <table>
  <tr>
   <td id = "${days[i]}-${j}-borderless-0" style = "text-align:right; font-size:10px;padding:5.5px"> <sup></sup> </td> <td id = "${days[i]}-${j}-0" onclick = "changeColor(id)" style = "border:solid;background-color:mistyrose;  height = "5x" width = 10px> </td>
  </tr>
 
  <tr>
   <td  id = "${days[i]}-${j}-borderless-1" style = "padding:5.5px"> </td> <td id = "${days[i]}-${j}-1" onclick = "changeColor(id)" style = "border-bottom: dashed; border-left: solid; border-right: solid;background-color:mistyrose; border-top: solid;" height = "5px"></td>
  </tr>
 
  <tr>
   <td id = "${days[i]}-${j}-borderless-2" style= "padding:5.5px"> </td> <td id = "${days[i]}-${j}-2" onclick = "changeColor(id)" style = "border:solid;background-color:mistyrose" height = "5px"></td>
  </tr>
      <tr>
   <td id = "${days[i]}-${j}-borderless-3" style= "padding:5.5px"> </td> <td id = "${days[i]}-${j}-3" onclick = "changeColor(id)" style = "border:solid;background-color:mistyrose" height = "5px"></td>
  </tr>
 </table>
`;
          day.innerHTML += template2; 
        }else if(j == 12){
          const table = document.createElement("table");
          table.id = `${dow}`+ "-" + j;
          table.textContent = "";
          document.body.appendChild(table);
          let template2 = `    
  <table>
  <tr>
   <td id = "${days[i]}-${j}-borderless-0" style = "text-align:right; font-size:10px; padding:5.5px"> <sup></sup> </td> <td id = "${days[i]}-${j}-0" onclick = "changeColor(id)" style = "border:solid;background-color:mistyrose;  height = "5x" width = 10px> </td>
  </tr>
 
  <tr>
   <td  id = "${days[i]}-${j}-borderless-1" style = "padding:5.5px"> </td> <td id = "${days[i]}-${j}-1" onclick = "changeColor(id)" style = "border-bottom: dashed; border-left: solid; border-right: solid;background-color:mistyrose; border-top: solid;" height = "5px"></td>
  </tr>
 
  <tr>
   <td id = "${days[i]}-${j}-borderless-2" style= "padding:5.5px"> </td> <td id = "${days[i]}-${j}-2" onclick = "changeColor(id)" style = "border:solid;background-color:mistyrose" height = "5px"></td>
  </tr>
      <tr>
   <td id = "${days[i]}-${j}-borderless-3" style= "padding:5.5px"> </td> <td id = "${days[i]}-${j}-3" onclick = "changeColor(id)" style = "border:solid;background-color:mistyrose" height = "5px"></td>
  </tr>
 </table>
`;
          day.innerHTML += template2; 
        }else if (j > 12){
          const table = document.createElement("table");
          table.id = `${dow}`+ "-" + j;
          table.textContent = "";
          document.body.appendChild(table);
          let template2 = `    
  <table>
  <tr>
   <td id = "${days[i]}-${j}-borderless-0" style = "text-align:right; font-size:10px; padding:5.5px"> <sup></sup> </td> <td id = "${days[i]}-${j}-0" onclick = "changeColor(id)" style = "border:solid;background-color:mistyrose;  height = "5x" width = 10px> </td>
  </tr>
 
  <tr>
   <td  id = "${days[i]}-${j}-borderless-1" style = "padding:5.5px"> </td> <td id = "${days[i]}-${j}-1" onclick = "changeColor(id)" style = "border-bottom: dashed; border-left: solid; border-right: solid;background-color:mistyrose; border-top: solid;" height = "5px"></td>
  </tr>
 
  <tr>
   <td id = "${days[i]}-${j}-borderless-2" style= "padding:5.5px"> </td> <td id = "${days[i]}-${j}-2" onclick = "changeColor(id)" style = "border:solid;background-color:mistyrose" height = "5px"></td>
  </tr>
      <tr>
   <td id = "${days[i]}-${j}-borderless-3" style= "padding:5.5px"> </td> <td id = "${days[i]}-${j}-3" onclick = "changeColor(id)" style = "border:solid;background-color:mistyrose" height = "5px"></td>
  </tr>
 </table>
`;
          day.innerHTML += template2; 
        }
        
        
 } }   }     }
//this calls the generateScheduleTables function
 function slowDown(){
   generateScheduleTables(["Sunday", "Wednesday"], "11am", "5pm");
 }
</script>
</html>
